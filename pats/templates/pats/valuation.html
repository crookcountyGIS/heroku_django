{% extends 'pats/base.html' %} 
{% load static %} 
{% load humanize %} 
{% load bootstrap5 %} 
{% bootstrap_css %} 
{% bootstrap_javascript %}
<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.6.1/dist/chart.min.js"></script>
{% block content %} 
{% for feature in data.features %} 

<div class="container">
    <div class="header">
      <h4>Valuation for account #{{feature.attributes.account_id}}</h4>
    </div>
  </div>
  <section class="bg dark text-dark text-left">
    <div class="container">
      <div class="col">
        <div id="account_info">
          <h5>Account Information</h5>
          <p>Mailing Name: {{feature.attributes.owner_name}}
            <br /> Map and Tax lot: {{feature.attributes.map_taxlot}}
            <br /> Situs Address: {{feature.attributes.situs_address}}
            <br /> Tax Status: {{feature.attributes.tax_status}}
          </p>
        </div>
{% endfor %}
        <img src="" alt="">
      </div>
    </div>
  </section>
  <section>
    <div class="container">
      <div class="col">
        <h5>Value History</h5>
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th scope="col"></th>
              <th scope="col">2018-2019</th>
              <th scope="col">2019-2020</th>
              <th scope="col">2020-2021</th>
              <th scope="col">2021-2022</th>
              <th scope="col">2022-2023</th>
            </tr>
          </thead>
          <tbody class="table">
            <tr>
              <th scope="row">Real Market Value - Land</th>
              <td>${{real_market_value.2018|intcomma}}</td>
              <td>${{real_market_value.2019|intcomma}}</td>
              <td>${{real_market_value.2020|intcomma}}</td>
              <td>${{real_market_value.2021|intcomma}}</td>
              <td>${{real_market_value.2022|intcomma}}</td>
            </tr>
            <tr>
              <th scope="row">Real Market Value - Structure</th>
              <td>${{value_structure.2018|intcomma}}</td>
              <td>${{value_structure.2019|intcomma}}</td>
              <td>${{value_structure.2020|intcomma}}</td>
              <td>${{value_structure.2021|intcomma}}</td>
              <td>${{value_structure.2022|intcomma}}</td>
            </tr>
            <tr>
              <th scope="row">Total Real Market Value</th>
              <td>${{total_real_market.2018|intcomma}}</td>
              <td>${{total_real_market.2019|intcomma}}</td>
              <td>${{total_real_market.2020|intcomma}}</td>
              <td>${{total_real_market.2021|intcomma}}</td>
              <td>${{total_real_market.2022|intcomma}}</td>
            </tr>
            <tr>
              <th scope="row">Maximum Assessed Value</th>
              <td>${{max_assessed.2018|intcomma}}</td>
              <td>${{max_assessed.2019|intcomma}}</td>
              <td>${{max_assessed.2020|intcomma}}</td>
              <td>${{max_assessed.2021|intcomma}}</td>
              <td>${{max_assessed.2022|intcomma}}</td>
            </tr>
            <tr>
              <th scope="row">Total Assessed Value</th>
              <td>${{total_assessed.2018|intcomma}}</td>
              <td>${{total_assessed.2019|intcomma}}</td>
              <td>${{total_assessed.2020|intcomma}}</td>
              <td>${{total_assessed.2021|intcomma}}</td>
              <td>${{total_assessed.2022|intcomma}}</td>
            </tr>
            <tr>
              <th scope="row">Veterans Exemption</th>
              <td>${{veterans.2018|intcomma}}</td>
              <td>${{veterans.2019|intcomma}}</td>
              <td>${{veterans.2020|intcomma}}</td>
              <td>${{veterans.2021|intcomma}}</td>
              <td>${{veterans.2022|intcomma}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
  <section>
    <div class="container">
    <div class="card">
        <div class="card-body">
            <canvas id="chLine"></canvas>
        </div>
    </div>
    </div>
  </section>

  
  {% for key, value in real_market_value.items %}
    <p id="data">{{ value }}</p>
  {% endfor %}

  {% endblock %}

  {% block scripts %}
  <script type="text/javascript">
    // chart colors
var colors = ['#007bff','#28a745','#333333','#c3e6cb','#dc3545','#6c757d'];
var totalMarket = document.getElementById("data")
console.log(totalMarket);
/* large line chart */
var chLine = document.getElementById("chLine");
var chartData = {
  labels: ['2018', '2019', '2020', '2021', '2022'],
  datasets: [{
    data: [totalMarket],
    backgroundColor: 'transparent',
    borderColor: colors[0],
    borderWidth: 4,
    pointBackgroundColor: colors[0]
  }
//   {
//     data: [639, 465, 493, 478, 589, 632, 674],
//     backgroundColor: colors[3],
//     borderColor: colors[1],
//     borderWidth: 4,
//     pointBackgroundColor: colors[1]
//   }
  ]
};
if (chLine) {
  new Chart(chLine, {
  type: 'line',
  data: chartData,
  options: {
    scales: {
      xAxes: [{
        ticks: {
          beginAtZero: false
        }
      }]
    },
    legend: {
      display: false
    },
    responsive: true
  }
  });
}
  </script>
  {% endblock scripts %}